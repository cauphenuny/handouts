## 数列基础

### 等差数列性质

$p+q=m+n\Rightarrow a_p+a_q=a_m+a_n\quad(p,q,m,n\in \mathbb{N}^*)$

$a_n,a_{n+m},a_{n+2m},\cdots$ 为等差数列，公差为 $md$

$S_{2n-1}=(2n-1)a_n;S_{2n}=n(a_n+a_{n+1})$

$S_n,S_{2n}-S_n,S_{3n}-S_{2n},\cdots$ 为等差数列，公差为 $n^2d$

若 $\{a_n\},\{b_n\}$ 等差，$b_n\neq 0$ ，$A_n,B_n$ 分别为其前 $n$ 项和，则 $\dfrac{a_n}{b_n}=\dfrac{A_{2n-1}}{B_{2n-1}}$

$\left\{\dfrac{S_n}{n}\right\}$ 是等差数列，公差为 $\dfrac{d}{2}$，$\dfrac{S_n}{n}=\dfrac{d}{2}n+(a_1-\dfrac{d}{2})$

$p\ne q,S_p=S_q$，则 $S_{p+q}=0$

### 等比数列性质

$a_n=a_1q^{n-1}$

$$
S_n=\left\{\begin{aligned}&na_1&q=1\\&\dfrac{a_1(1-q^n)}{1-q}=\dfrac{a_{n+1}-a_1}{q-1}&q\neq 1\end{aligned}\right.
$$

$p+q=m+n\Rightarrow a_p\cdot a_q=a_m\cdot a_n$

$a_n,a_{n+m},a_{n+2m},\cdots$ 为等比数列，公比为 $q^m$

$S_n,S_{2n}-S_n,S_{3n}-S_{2n},\cdots$ 都不为零时构成等比数列，公比为 $q^n$

若 $\{a_n\}$ 等差，则 $\{a^{a_n}\}(a\ne 0)$ 等比，公比 $a^d$

若 $\{b_n\}$ 是正项等比数列，则 $\{\log_ab_n\}$ 是等差数列，公差为 $\log_a q$

例：

1. 等差数列 $\{a_n\},\{b_n\}$ 的前 $n$ 项和分别为 $S_n,T_n$。$\forall n,\dfrac{S_n}{T_n}=\dfrac{2n-7}{3n+2}$，则 $\dfrac{a_5}{b_1+b_{11}}+\dfrac{a_7}{b_3+b_9}=(\qquad)$

2. 等差数列 $\{a_n\}$ 的前 $n$ 项和为 $S_n$。$S_k=2,S_{3k}=8$ 则 $S_{4k}=(\qquad)$

3. $\triangle ABC$ 中，$\tan A,\tan B,\tan C$ 成等差数列，则 $B$ 的取值范围是：

   (结论：$\tan A+ \tan B+\tan C=\tan A\cdot\tan B\cdot\tan C$)

4. $a_n$ 等比 $a_5\cdot a_{11}=3,a_3+a_{13}=4$，则 $\dfrac{a_{15}}{a_5}=(\qquad)$

5. 等比数列 $\{a_n\}$ 中，$a_n>0$。$a_5,a_{95}$ 是方程 $x^2-10x+16=0$ 的两根，则 $a_{20}\cdot a_{50}\cdot a_{80}$ 的值为：

ans：

$\frac37,32,[\frac\pi 3,\frac\pi 2)$

$3或\frac13,64$

### 数列求和

公式法与分组求和

倒序相加法与错位相减法

裂项相消法

例题：

1. $a_n=3^{n-1}+2n-1$

2. $a_n=(2n+1)\cdot 2^n$

3. $a_n=(n^2+3n+4)\cdot 2^{n-1}$

4. $\{a_n\}$ 是公比不等于 $1$ 的正项等比数列，$\lg a_1+\lg a_{2019}=0$，$f(x)=\dfrac{2}{1+x^2}$，则 $f(a_1)+f(a_2)+\cdots+f(a_{2019})=(\qquad)$

ans:

$n^2+\dfrac{3^n-1}{2}$

$(2n-1)\cdot 2^{n+1}+2$

$2^n(n^2+n+3)-3$

$2019$

常见裂项公式

$\dfrac{1}{n(n+k)}=\dfrac 1k\left(\dfrac1n-\dfrac1{n+k}\right)$

$\dfrac{1}{\sqrt{n}+\sqrt{n+1}}=\sqrt{n+1}-\sqrt n$

$\ln\dfrac{n+1}n=\ln(n+1)-\ln n$

$\dfrac{2^n}{(2^{n+1}-1)(2^n-1)}=\dfrac1{2^n-1}-\dfrac1{2^{n+1}-1}$

$\dfrac{4n^2}{(2n+1)(2n-1)}=1+\dfrac{1}{2}\left(\dfrac1{2n-1}-\dfrac1{2n+1}\right)$

$\dfrac{n+2}{n(n+1)\cdot 2^n}=\dfrac{1}{n\cdot 2^{n-1}}-\dfrac1{(n+1)2^n}$

tips: 先猜后证，先编一个结构，再做差解出参数。e.g. $\dfrac k{n\cdot2^n}-\dfrac{k}{(n+1)2^{n+1}}\Rightarrow k=2$

$\tan n\cdot \tan(n-1)=\dfrac{\tan n-\tan(n-1)}{\tan 1}-1$

（proof. $\tan1=\tan[n-(n-1)]$）   

---
## 数列进阶

### 求通项公式

#### 1.累加累乘

$a_{n+1}-a_n=f(n)\Rightarrow a_n-a_1=\sum\limits_{i=1}^{n-1}f(i)$

$\dfrac{a_{n+1}}{a_n}=g(n)\Rightarrow a_n=a_1\cdot\prod\limits_{i=1}^{n-1}g(i)$

#### 2.待定系数

**一阶类等比递推式型 $a_{n+1}=pa_n+f(n)$**



主要思路：待定系数求出辅助数列

1. $a_{n+1}=pa_n+q$

   待定系数 $x$ 使得 $a_{n+1}+x=p(a_n+x)$

   然后令 $b_n=a_n+x\Rightarrow b_{n+1}=pb_n\Rightarrow\{b_n\}为等比数列$

   e.g. $a_{n+1}=2a_n+3,a_1=1$ 解得 $a_n=2^{n+1}-3$

2. $a_{n+1}=pa_n+kn+b$

   类似，构造 $\alpha,\beta$ 使得 $a_{n+1}+\alpha (n+1)+\beta=p(a_n+\alpha n+\beta)$

   令 $b_n=a_n+\alpha n+\beta$

3. $a_{n+1}=pa_n+q^n$

   法一：待定系数 $k$ 使得 $a_{n+1}+k\cdot q^{n+1}=p(a_n+k\cdot q^n)$，随后令 $b_n=a_{n}+k\cdot q^n$

   法二：等式两边同时处以 $q^n\Rightarrow \dfrac{a_{n+1}}{q^n}=\dfrac{p}{q}\cdot\dfrac{a_n}{q^{n-1}}+1$ 令 $b_n=\dfrac{a_n}{q^{n-1}}$ 则 $b_{n+1}=\dfrac{p}{q}\cdot b_n+1$ 转化为第一种情况。

4. $a_{n+1}=pa_n+p^n$

   此时上述法一失效，仅法二可用。

#### 3.取倒/对数

$a_{n+1}=\dfrac{pa_n}{qa_n+r}$

方法：取倒数 $\dfrac1{a_{n+1}}=\dfrac qp+\dfrac rp\cdot\dfrac1{a_{n}}$ 转化为待定系数第一种情况

$a_{n+1}=p\cdot a_n^r$

方法：取对数 $\ln a_{n+1}=\ln p+r\ln a_n$

#### 4.少写一项做差

$n=1\Rightarrow a_1$

$n\ge 2\Rightarrow$ 做差

例：等差数列 $\{a_n\}$ 首项为 $1$，公差为 $2$，$\{b_n\}$ 满足 $\dfrac{a_1}{b_1}+\dfrac{a_2}{b_2}+\dfrac{a_3}{b_3}+\cdots+\dfrac{a_n}{b_n}=1-\dfrac{1}{2^n}$，$\{b_n\}$ 的前 $n$ 项和为 $S_n$ ，则 $S_5$ 的值为

#### 5.代数变形

$a_n=S_n-S_{n-1}$

#### 6.不动点法/特征根法 (*)

**二阶线性递推型 $a_{n+2}+pa_{n+1}+qa_n=0$**

方法：

法一（特征根法）：

设 $\alpha,\beta$ 为 $x^2+px+q=0$ 的两解

$\alpha\neq \beta\Rightarrow a_n=A{\alpha}^{n}+B{\beta}^{n}$

$\alpha= \beta\Rightarrow a_n=(An+B){\alpha}^n$

其中 $A$ $B$ 待定，可由 $a_1,a_2$ 解出

法二（构造等比数列）：

设 $\alpha,\beta$ 为 $x^2+px+q=0$ 的 两解

则 $a_{n+2}-(\alpha+\beta)a_{n+1}+\alpha\beta a_n=0\Rightarrow a_{n+2}-\alpha a_{n+1}=\beta(a_{n+1}-\alpha a_n)$

$\Rightarrow\{a_{n+1}-\alpha a_n\}等比$

求出 $a_{n+1}-\alpha a_n$ 后转换为一阶类等比递推式。

**分式型** $a_{n+1}=\dfrac{pa_n+q}{ra_n+s}$

找到不动点 $x=\dfrac{px+q}{rx+s}$

几种情况：

$x_1\ne x_2$，则 $\left\{\dfrac{a_{n}-x_1}{a_n-x_2}\right\}$ 等比

$x_1=x_2$，则 $\left\{\dfrac{1}{a_n-x_1}\right\}$ 等差

无实根，则有一定周期性，可找规律